{"version":3,"sources":["types/BuilderToolbox.js","types/BuilderContainer.js","types/Component.js","webbuilder.js"],"names":["BuilderToolbox","toolboxElQuery","options","el","document","querySelector","undefined","Error","component","appendChild","produceDraggableEl","component_name","componentEl","remove","innerHTML","BuilderContainer","containerElQuery","dropTarget","addEventListener","e","preventDefault","target","hasAttribute","setAttribute","dragleave","removeAttribute","draggedEl","webbuilder","draggingComponent","findComponent","attributes","value","dropareaEl","can","produceRealEl","ComponentConfig","canDropOn","Component","name","type","template","createElement","tempEl","insertAdjacentHTML","console","log","firstElementChild","toolbox","container","components","init","define","isComponentDefined","push","addItem","result","forEach"],"mappings":"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","file":"webbuilder.js","sourceRoot":"../src/js","sourcesContent":["export class BuilderToolbox {\n    constructor(toolboxElQuery, options) {\n        // Set element from query\n        this.el = document.querySelector(toolboxElQuery);\n\n        // Check if not found\n        if(this.el === undefined) {\n            throw new Error('Toolbox element cannot be undefined');\n        }\n    }\n\n    // Add component to toolbox\n    addItem(component) {\n        // Add draggable component\n        this.el.appendChild(component.produceDraggableEl());\n    }\n    // Remove component from toolbox\n    removeItem(component_name) {\n        // Find component\n        let componentEl = this.el.querySelector(`[data-component-name=${component_name}]`);\n        // Remove component (if found)\n        if(componentEl !== undefined) componentEl.remove();\n    }\n    // Clear all components in toolbox\n    clearItems() {\n        this.el.innerHTML = '';\n    }\n}","import { webbuilder } from \"../webbuilder\";\n\nexport class BuilderContainer {\n    constructor(containerElQuery) {\n        // Set element from query\n        this.el = document.querySelector(containerElQuery);\n\n        // Check if not found\n        if(this.el === undefined) {\n            throw new Error('Container element cannot be undefined');\n        }\n        // Define drop area\n        else {\n            var dropTarget = undefined;\n\n            // When component over\n            this.el.addEventListener('dragover', function(e) {\n                e.preventDefault();\n\n                dropTarget = e.target;\n                if(dropTarget.hasAttribute('root') || dropTarget.hasAttribute('container'))\n                    dropTarget.setAttribute('dropping', true);\n            }, false);\n\n            // When component leaves\n            var dragleave = function (e) {\n                e.preventDefault();\n                if(dropTarget.hasAttribute('dropping')) dropTarget.removeAttribute('dropping');\n            }\n            this.el.addEventListener('dragleave', dragleave, false);\n            this.el.addEventListener('dragend', dragleave, false);\n            \n            // When component being dropped\n            this.el.addEventListener('drop', function(e) {\n                dragleave(e);\n\n                // Get dragged\n                var draggedEl = webbuilder.draggingComponent;\n                var component = webbuilder.findComponent(draggedEl.attributes['component-name'].value);\n                // Get drop area\n                var dropareaEl = e.target;\n\n                // If drop area == root container\n                // Or           == container component\n                if(dropareaEl.hasAttribute('root') || dropareaEl.hasAttribute('container') || component.can) {\n                    // Produce\n                    dropareaEl.appendChild(component.produceRealEl());\n                    //dropareaEl.appendChild(draggedEl.firstChild.cloneNode(true));\n                }\n\n                dropTarget = undefined;\n            }, false);\n        }\n    }\n}","import { webbuilder } from \"../webbuilder\";\n\nexport class ComponentConfig {\n    constructor(canDropOn={}) {\n        this.canDropOn = canDropOn;\n    }\n}\nexport class Component {\n    constructor(name, type, template, config = new ComponentConfig()) {\n        if(name !== undefined && type !== undefined && template !== undefined) {\n            this.name = name;\n            this.type = type;\n            this.template = template;\n        }\n        else {\n            throw new Error('Unspecified component name or type or template');\n        }\n    }\n\n    // Produce draggable element of this component\n    produceDraggableEl() {\n        // Create div\n        let el = document.createElement('div');\n        el.setAttribute('class', `component-template`);\n        el.setAttribute('component-name', this.name);\n        el.setAttribute('component-type', this.type);\n        // Make it draggable\n        el.setAttribute('draggable', true);\n        el.setAttribute('dragging', false);\n        el.addEventListener('dragstart', function(e) {\n            if(webbuilder.draggingComponent == undefined) {\n                webbuilder.draggingComponent = this;\n                webbuilder.draggingComponent.setAttribute('dragging', true);\n            }\n        }, false);\n        el.addEventListener('dragend', function(e) {\n            e.preventDefault();\n            if(webbuilder.draggingComponent != undefined) {\n                webbuilder.draggingComponent.setAttribute('dragging', false);\n                webbuilder.draggingComponent = undefined;\n            }\n        }, false);\n        // Assign html template to inner\n        el.innerHTML = this.template;\n        return el;\n    }\n\n    produceRealEl() {\n        // Create temp element\n        var tempEl = document.createElement('template');\n        // Set template code as inner\n        tempEl.insertAdjacentHTML('afterbegin', this.template)\n\n        if(this.type == 'element') {\n            // Return template code in inner as element\n            console.log(tempEl.firstElementChild);\n            return tempEl.firstElementChild;\n        }\n        else if(this.type == 'container') {\n            // Return template code, with container attr set to true\n            tempEl = tempEl.firstElementChild;\n            tempEl.setAttribute('container', '');\n            return tempEl;\n        }\n        else throw new Error('Unknown component type, unable to produce element');\n    }\n\n    canDropOn(el) {\n\n    }\n}","import { BuilderToolbox } from \"./types/BuilderToolbox\";\nimport { BuilderContainer } from \"./types/BuilderContainer\";\nimport { Component } from \"./types/Component\";\n\nexport const webbuilder = {\n    toolbox: undefined,\n    container: undefined,\n\n    draggingComponent: undefined,\n    components: [],\n\n    // Initialize webbuilder\n    init: function(toolbox, container, components=[]) {\n        if(toolbox instanceof BuilderToolbox && container instanceof BuilderContainer) {\n            this.toolbox = toolbox;\n            this.container = container;\n            this.components = components;\n        }\n        else {\n            throw new Error('toolbox should be instance of BuilderToolbox, container should be instance of BuilderContainer')\n        }\n    },\n\n    // Define new component\n    define: function(name, type, template) {\n        if(!this.isComponentDefined(name)) {\n            // Create component object\n            let component = new Component(name, type, template);\n            // Add component to list\n            this.components.push(component);\n            // Add component to toolbox\n            this.toolbox.addItem(component);\n        }\n        else throw new Error(`Component ${name} is already defined`)\n    },\n\n    findComponent: function(name) {\n        var result = undefined;\n        // Loop all components\n        this.components.forEach(component => {\n            if(component.name == name) result = component;\n        });\n        return result;\n    },\n    isComponentDefined: function(name) {\n        var result = false;\n        // Loop all components\n        this.components.forEach(component => {\n            if(component.name == name) result = true;\n        });\n        return result;\n    }\n}"]}